[Rainmeter]
Author=aidendrew.deviantart.com - http://rainmeterdesk.blogspot.com
Update=30

[Variables]

FRAMES=10
EXCEED=9

;----------------------------------------------------------------

SHOWCONTENTS=[!RainmeterShowMeter Photo][!RainmeterHideMeter Icon][!RainmeterShowMeter UserPhoto][!RainmeterShowMeter Text][!RainmeterShowMeter Lock][!RainmeterShowMeter UserName]

HIDECONTENTS=[!RainmeterHideMeter Photo][!RainmeterHideMeter UserPhoto][!RainmeterHideMeter Text][!RainmeterHideMeter Lock][!RainmeterHideMeter UserName]


[CLOSED]
	Measure=Calc
	Formula=0
[OPENED]
	Measure=Calc
	Formula=#FRAMES#
[STOP]
	Measure=Calc
	Formula=Counter
[HOLD]
	Measure=Calc
	Formula=HOLD = 0 ? STOP : HOLD
	Disable=1
[RESET]
	Measure=Calc
	Formula=STOP - HOLD
	IfAboveValue=#EXCEED#
	IfAboveAction=!Execute [!RainmeterDisableMeasure HOLD]
[FORWARD]
	Measure=Calc
	MinValue=0
	MaxValue=#FRAMES#
	Formula=(STOP-HOLD < #FRAMES#) ? STOP-HOLD : 0
	IfEqualValue=#EXCEED#
	IfEqualAction=!Execute [!RainmeterShowMeter (opened)][!RainmeterHideMeter (forward)][!RainmeterDisableMeasure FORWARD][!RainmeterShowMeter (close)]#SHOWCONTENTS#[!RainmeterDisableMeasure HOLD][!RainmeterRedraw]
	Disabled=1
[REVERSE]
	Measure=Calc
	MinValue=0
	MaxValue=#FRAMES#
	Formula=(STOP-HOLD < #FRAMES#) ? #FRAMES#-(STOP-HOLD) : #EXCEED#
	IfEqualValue=1
	IfEqualAction=!Execute [!RainmeterShowMeter (closed)][!RainmeterHideMeter (reverse)][!RainmeterDisableMeasure REVERSE][!RainmeterShowMeter (open)][!RainmeterDisableMeasure HOLD][!RainmeterRedraw]
	Disabled=1
[(closed)]
	Meter=BITMAP
	MeasureName=CLOSED
	X=r
	Y=40
	BitmapImage=Animation.png
	BitmapFrames=#FRAMES#
[(forward)]
	Meter=BITMAP
	MeasureName=FORWARD
	BitmapImage=Animation.png
	X=r
	Y=r
	BitmapFrames=#FRAMES#
	Hidden=1
[(reverse)]
	Meter=BITMAP
	MeasureName=REVERSE
	X=r
	Y=r
	BitmapImage=Animation.png
	BitmapFrames=#FRAMES#
	Hidden=1
[(opened)]
	Meter=BITMAP
	MeasureName=OPENED
	X=r
	Y=r
	BitmapImage=Animation.png
	BitmapFrames=#FRAMES#
	BitmapZeroFrame=1
	Hidden=1

;----------------------------------------------------------------

[Icon]
Meter=Image
ImageName=user.png
X=60
Y=0

[(open)]
Meter=Image
x=70
y=10
H=20
W=20
LeftMouseUpAction=!Execute [!RainmeterHideMeter (open)][!RainmeterEnableMeasure HOLD][!RainmeterEnableMeasure FORWARD][!RainmeterShowMeter (forward)][!RainmeterHideMeter (closed)][!RainmeterRedraw]

[(close)]
Meter=Image
x=75
y=50
H=20
W=20
hidden=1
LeftMouseUpAction=!Execute #HIDECONTENTS#[!RainmeterHideMeter (close)][!RainmeterEnableMeasure HOLD][!RainmeterEnableMeasure REVERSE][!RainmeterShowMeter (reverse)][!RainmeterShowMeter icon][!RainmeterHideMeter (opened)][!RainmeterShowMeter Icon]

------------------- PHOTO USER -----------------

[MeasureHost]
Measure=Plugin
Plugin=Plugins\SysInfo.dll
SysInfoType=HOST_NAME

[UserPhoto]
Meter=Image
ImageName=%USERPROFILE%\AppData\Local\Temp\%USERNAME%.bmp
W=68
H=68
X=50
Y=75
Hidden=1


[Photo]
Meter=Image
ImageName=photo.png
X=33
Y=60
Hidden=1


[UserName]
MeasureName=MeasureHost
Meter=STRING
X=38
Y=180
FontFace=Track
FontSize=10
FontColor=fefbf9
AntiAlias=1
Text="%1"
Antialias=1
Hidden=1


------------------ Lock Button ---------------

[Lock]
Meter=Image
ImageName=button.png
X=6
Y=230
Hidden=1
LeftMouseDownAction=!Execute [%windir%\System32\rundll32.exe powrprof.dll,SetSuspendState]


[Text]
Meter=STRING
Text=LOGOUT
FontFace=Track
X=55
Y=241
FontSize=9
FontColor=fefbf9
AntiAlias=1
Hidden=1
