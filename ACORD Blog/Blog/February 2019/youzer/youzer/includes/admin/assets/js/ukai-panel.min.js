!function(o){"use strict";o(document).ready(function(){o(document).on("click",".yz-fixed-save-btn",function(e){if(e.preventDefault(),o(this).hasClass("yz-loading"))return!1;o(".yz-settings-form").trigger("submit")}),o(".yz-settings-form").submit(function(e){e.preventDefault(),o.yz_saving_options_effect(),o("#youzer-wait-message").show();var t=o(this).serialize();o.post(yz.ajax_url,t,function(e){console.log(e),o.yz_saving_options_effect({step:"end"}),o("#youzer-wait-message").hide(),1==e?o.ShowPanelMessage({type:"success"}):0==e?o.ShowPanelMessage({msg:yz.try_later,type:"error"}):"refresh"!=e?o.ShowPanelMessage({msg:e,type:"error"}):"refresh"==e&&(o.ShowPanelMessage({type:"success"}),location.reload())})}),o.yz_saving_options_effect=function(e){var t=o.extend({step:"processing"},e);"processing"==t.step?(o(".yz-fixed-save-btn").addClass("yz-loading"),o(".yz-save-options").fadeOut(800,function(){o(this).prop("disabled",!0);var e='<i class="fa fa-spinner fa-spin" aria-hidden="true"></i>'+yz.processing;o(this).html(e).fadeIn(1e3)})):"end"==t.step&&(o(".yz-fixed-save-btn").removeClass("yz-loading"),o(".yz-save-options").fadeOut(200,function(){o(this).html(yz.save_changes).fadeIn(1e3),o(this).prop("disabled",!1)}))},o(".yz-picker-input").wpColorPicker(),o(document).on("click",".uk-upload-button",function(e){e.preventDefault();var t,s=o(this).closest(".uk-uploader");(t=wp.media.frames.kainelabs_uploader=wp.media({title:"Insert Images",library:{type:"image"},button:{text:"Select"},multiple:!1})).on("select",function(){t.state().get("selection").map(function(e){e=e.toJSON(),s.find(".uk-photo-url").val(e.url),s.find(".uk-photo-preview").css("backgroundImage","url("+e.url+")")})}),t.open()}),o.enable_live_preview=function(){o(".uk-photo-url").bind("input change",function(){var e=o(this).val(),t=o(this).closest(".uk-uploader");o.yz_isImgExist(e)||(e=yz.default_img),t.find(".uk-photo-preview").css("backgroundImage","url("+e+")")})},o.enable_live_preview(),o.yz_isImgExist=function(e,t){var s=new Image;t=void 0!==t?t:"photo";return s.src=e,0!=s.width||("banner"==t&&o.ShowPanelMessage({msg:yz.banner_url,type:"error"}),!1)},o(document).on("click",".yz-confirm-reset",function(e){o(".uk-popup").removeClass("is-visible"),e.preventDefault();var t,s="&action=youzer_reset_settings",n=o(this).data("reset"),i="&reset_type="+n;"tab"===n?t=o(".yz-settings-form").serialize()+s+i:"all"===n&&(t=s+i);o("#youzer-wait-message").show(),o.post(yz.ajax_url,t,function(e){o("#youzer-wait-message").hide(),1==e?(o.ShowPanelMessage({type:"success"}),location.reload()):o.ShowPanelMessage({msg:yz.reset_error,type:"error"})})}),o(".kl-hide-box-icon").click(function(e){e.preventDefault();var t=o(this).closest(".uk-box-item");t.find(".uk-box-content").fadeToggle(400,function(){t.toggleClass("kl-hide-box")})}),o(".uk-toggle-msg").click(function(e){e.preventDefault();var t=o(this).closest(".uk-panel-msg");t.find(".uk-msg-content").slideToggle(400,function(){t.toggleClass("uk-show-msg"),t.hasClass("uk-show-msg")?t.find("input").val("on"):t.find("input").val("off")})}),o(".uk-close-msg").click(function(e){o(this).closest(".uk-panel-msg").find("input").val("never"),o(this).closest(".uk-panel-msg").fadeOut(600)});var t=o(".yz-panel-menu");o(".kl-toggle-btn").change(function(e){o.initResponsivePanel()}),o.initResponsivePanel=function(){o(".kl-toggle-btn").is(":checked")?t.slideDown():t.slideUp()},o(window).on("resize",function(e){e.preventDefault(),768<o(window).width()?t.fadeIn(1e3):o.initResponsivePanel()}),o(".uk-sidebar a").click(function(e){o(".kl-toggle-btn").is(":checked")&&o(window).width()<769&&(o(".kl-toggle-btn").attr("checked",!1),t.slideUp(400,function(){o("html, body").animate({scrollTop:o(".youzer-main-content").offset().top-o(".kl-responsive-menu").height()},600)}))}),o(".yz-reset-options").on("click",function(e){e.preventDefault(),o("#uk_popup_reset_tab").addClass("is-visible")}),o("#yz-reset-all-settings").on("click",function(e){e.preventDefault(),o("#uk_popup_reset_all").addClass("is-visible")})})}(jQuery);