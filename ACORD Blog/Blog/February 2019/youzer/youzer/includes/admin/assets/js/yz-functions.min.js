!function(m){"use strict";m(document).ready(function(){m.yz_EditForm=function(e){var o,r,t=m.extend({},e),a=m.yz_getDataName(t.item),d=m.yz_getItemByType({form:t.item,type:"data"});t.form.attr("data-"+a.name,a.value),t.form.find(".yz-md-title").html(t.form_title+'<i class="fa fa-close yz-md-close-icon" aria-hidden="true"></i>'),t.form.find(".yz-md-save").text(yz.save_changes),t.form.find(".yz-md-save").attr("id",t.button_id),t.form.find(":input").not(".uk-upload-button,:button,.ukai_tags_field").each(function(){var a=m(this).attr("name"),n=m(this).attr("type"),s=m(this).prop("nodeName").toLowerCase(),i=m(s+"[name="+a+"]");m.each(d,function(e,t){~a.indexOf(t.name)&&(o=t.value,"text"===n||"textarea"===s||"hidden"===n||"select"===s?("input"===s?i.val(o):"textarea"===s?i.val(decodeURIComponent(o)):"select"===s&&m("select[name="+a+"] option[value="+o+"]").attr("selected","selected"),m.yz_FormLivePreview({selector:i.parent(),name:t.name,value:o})):"checkbox"===n?(r="false"!==o,i.prop("checked",r)):"radio"===n&&m("input[name="+a+"][value="+o+"]").trigger("click"))})})},m.yz_updateFieldsData=function(e,t){var a=m.yz_getDataName(e),n=m.yz_getNewData(e),s=(m.yz_getItemObject(e),e.find(".yz-keys-name").attr("value"));m.each(n,function(e,t){("yz_ads"==s&&"code"==t.key||"yz_custom_tabs"==s&&"content"==t.key||"yz_custom_widgets"==s&&"content"==t.key)&&(t.value=encodeURIComponent(t.value)),m('input[name="'+s+"["+a.value+"]["+t.key+']"]').val(t.value)}),m.yz_ItemLivePreview(e),m.yz_HideModal(e)},m.yz_ResetForm=function(e,t){t=void 0!==t?t:null;var a,n=m.yz_getFieldsNames(e,"namesOnly");e.find(".yz-md-save").text(yz.done),e.find(".yz-md-title").html(e.find(".yz-md-title").data("title")+'<i class="fa fa-close yz-md-close-icon" aria-hidden="true"></i>'),e.find(".yz-md-save").attr("id",e.find(".yz-md-save").data("add")),m.each(n,function(e,t){"text"===(a=t.type)?m("input[name="+t.name+"]").val(""):"textarea"===a?m("textarea[name="+t.name+"]").val(""):"radio"===a?m("input:radio[name="+t.name+"]:first").trigger("click"):"select"===a&&m("select[name="+t.name+"] option:first").attr("selected","selected")}),"ads"===t?(m("input[name=yz_ad_is_sponsored]").attr("checked",!1),m("input[name=yz_ad_type][value=banner]").trigger("click"),e.find(".uk-photo-preview").css("backgroundImage","url("+yz.default_img+")")):"reactions"===t?(m("input[name=yz_emoji_visibility]").attr("checked",!0),e.find(".uk-photo-preview").css("backgroundImage","url("+yz.default_img+")")):"networks"===t?(e.find(".ukai-selected-icon").val("share-alt"),e.find(".wp-color-result").css({"background-color":""}),e.find(".ukai_icon_selector > i").removeClass().addClass("fa fa-share-alt")):"custom-widgets"===t?(e.find(".ukai-selected-icon").val("globe"),e.find(".ukai_icon_selector > i").removeClass().addClass("fa fa-globe")):"custom-tabs"===t?(m("input[name=yz_tab_display_sidebar]").attr("checked",!0),m("input[name=yz_tab_display_nonloggedin]").attr("checked",!0),m("input[name=yz_tab_type][value=link]").trigger("click")):"member-types"===t?(e.find(".wp-color-result").css({"background-color":""}),m("input[name=yz_member_type_active]").attr("checked",!0),m("input[name=yz_member_type_register]").attr("checked",!0),m("input[name=yz_member_type_show_in_md]").attr("checked",!0),e.find(".ukai-selected-icon").val("user"),e.find(".ukai_icon_selector > i").removeClass().addClass("fa fa-user")):"user-tags"===t&&(e.find(".ukai-selected-icon").val("globe"),e.find(".ukai_icon_selector > i").removeClass().addClass("fa fa-globe")),m.yz_CheckItemsList(t)},m.yz_getNewData=function(e,n){n=void 0!==n?n:null;var t=m.yz_getItemObject(e),a=m.yz_getFieldsNames(e),s=m.yz_getItemByType({form:t,type:"keys"}),i=[];return m.each(a,function(e,a){m.each(s,function(e,t){0<=a.name.indexOf(t)&&("keyToVal"===n?i[t]=a.value:i.push({key:t,value:a.value}))})}),i},m.isDataEmpty=function(e){var a,n=!1,t=m.yz_getFieldsNames(e);return m.each(t,function(e,t){null!=(a=t.value)&&""!=m.trim(a)||(m.ShowPanelMessage({msg:yz.required_fields,type:"error"}),n=!0)}),!!n},m.yz_getAddData=function(e,a){var n,s=[],t=m.yz_getFieldsNames(e);return m.each(t,function(e,t){null!=t.name&&(n=t.name.replace(a+"_",""),s[n]=t.value)}),s},m.yz_getFieldsNames=function(e,t){t=void 0!==t?t:null;var a,n,s,i=[],o=[];return e.find(":input").not(".uk-upload-button, :button, .yz-hidden-input, .ukai_tags_field").each(function(){if(a=m(this).attr("name"),null==(n=m(this).attr("type"))&&(n=m(this).prop("nodeName").toLowerCase()),"checkbox"===n)s=0<m("input[name="+a+"]:checked").length;else if("radio"===n)s=m("input[name="+a+"]:checked").val();else if("select"===n)s=m(this).attr("value");else if("textarea"===n)s=m(this).attr("value");else{var e=m("input[name='"+a+"']").map(function(){return m(this).val()}).get();s=e.join(",")}-1==o.indexOf(a)&&(o.push(a),"keyToVal"==t?i[a]=s:i.push({name:a,type:n,value:s}))}),i},m.yz_getItemByType=function(e){var t,a,n,s,i=m.extend({},e),o=[],r=[];return i.form.find("> input").each(function(){t=m(this).attr("name"),a=m(this).attr("value"),n=0,t.replace(/\[.+?\]/g,function(e){n++,s=e.slice(1,-1),1==n&&-1!==s.indexOf("yz_cwg")&&-1!==s.indexOf("fields")&&(a=s),2==n&&("fields"===s&&(s="widget"),r.push(s),o.push({name:s,value:a}))})}),"keys"===i.type?r:o},m.yz_FormLivePreview=function(e){var t=m.extend({},e);"banner"===t.name||"image"===t.name?t.selector.next(".uk-photo-preview").css("backgroundImage","url("+t.value+")"):"color"===t.name||"left_color"==t.name||"right_color"==t.name?t.selector.closest(".wp-picker-input-wrap").prev(".wp-color-result").css({"background-color":t.value}):"icon"===t.name&&(t.selector.find(".ukai_icon_selector > i").removeClass().addClass("fa fa-"+t.value),t.selector.find(".ukai-selected-icon").val(t.value))},m.yz_ItemLivePreview=function(e){var t=m.yz_getNewData(e,"keyToVal"),a=m.yz_getItemObject(e),n=e.attr("id");"yz-ads-form"===n?(a.find(".yz-ad-title").text(t.title),"adsense"===t.type?(a.find(".yz-ad-img").attr("style",""),a.find(".yz-ad-img i").show()):(a.find(".yz-ad-img").css("backgroundImage","url("+t.banner+")"),a.find(".yz-ad-img i").hide())):"yz-reactions-form"===n?(a.find(".yz-emoji-title").text(t.title),a.find(".yz-emoji-img").css("backgroundImage","url("+t.image+")")):"yz-networks-form"===n||"yz-custom-widgets-form"===n?("yz-networks-form"===n&&a.find("h2").css({"border-color":t.color}),a.find("h2 span").text(t.name),a.find("h2 i").removeClass().addClass("fa yz-network-icon fa-"+t.icon)):"yz-custom-tabs-form"===n?a.find("h2 span").text(t.title):"yz-member-types-form"===n?(a.find("h2 span").text(t.name),a.find("h2 i").removeClass().addClass("fa yz-member-type-icon fa-"+t.icon)):"yz-user-tags-form"===n&&(a.find("h2 span").text(t.name),a.find("h2 i").removeClass().addClass("fa yz-user-tag-icon fa-"+t.icon))},m.yz_getDataName=function(a){var n=[];return m.each(a.data(),function(e,t){"sortableItem"!=e&&(n.name=e.replace(/([A-Z])/g,"-$1").trim().toLowerCase(),n.value=a.attr("data-"+n.name))}),n},m.yz_getItemObject=function(e){var t=m.yz_getDataName(e);return m("li[data-"+t.name+"="+t.value+"]")},m(".yz-delete-item").live("click",function(){m(this).parent().addClass("removered").fadeOut(function(){var e=m(this).closest("li");e.remove(),e.attr("data-ad-name")?m.yz_CheckItemsList("ads"):e.attr("data-emoji-name")?m.yz_CheckItemsList("reactions"):e.attr("data-network-name")?m.yz_CheckItemsList("networks"):e.attr("data-widget-name")?m.yz_CheckItemsList("custom-widgets"):e.attr("data-tab-name")?m.yz_CheckItemsList("custom-tabs"):e.attr("data-member-type-name")?m.yz_CheckItemsList("member-types"):e.attr("data-user-tag-name")&&m.yz_CheckItemsList("user-tags")})}),m.yz_CheckItemsList=function(e){"widgets"===e&&(m(".yz-widget-item")[0]?(m(".yz-fields-button").fadeIn(),m(".yz-no-wg").remove()):m(".yz-no-wg")[0]||(m(".yz-fields-button").fadeOut(),m("#yz_widgets").append('<p class="yz-no-content yz-no-wg">'+yz.no_wg+"</p>"))),"ads"===e&&(m(".yz-ad-item")[0]?m(".yz-no-ads").remove():m(".yz-no-ads")[0]||m("#yz_ads").append('<p class="yz-no-content yz-no-ads">'+yz.no_ads+"</p>")),"reactions"===e&&(m(".yz-emoji-item")[0]?m(".yz-no-emojis").remove():m(".yz-no-emojis")[0]||m("#yz_reactions").append('<p class="yz-no-content yz-no-emojis">'+yz.no_emojis+"</p>")),"networks"===e&&(m(".yz-network-item")[0]?m(".yz-no-networks").remove():m(".yz-no-networks")[0]||m("#yz_networks").append('<p class="yz-no-content yz-no-networks">'+yz.no_networks+"</p>")),"custom-widgets"===e&&(m(".yz-custom-widget-item")[0]?m(".yz-no-custom-widgets").remove():m(".yz-no-custom-widgets")[0]||m("#yz_custom_widgets").append('<p class="yz-no-content yz-no-custom-widgets">'+yz.no_custom_widgets+"</p>")),"custom-tabs"===e&&(m(".yz-custom-tab-item")[0]?m(".yz-no-custom-tabs").remove():m(".yz-no-custom-tabs")[0]||m("#yz_custom_tabs").append('<p class="yz-no-content yz-no-custom-tabs">'+yz.no_custom_tabs+"</p>")),"member-types"===e&&(m(".yz-member-type-item")[0]?m(".yz-no-member-types").remove():m(".yz-no-member-types")[0]||m("#yz_member_types").append('<p class="yz-no-content yz-no-member-types">'+yz.no_member_types+"</p>")),"user-tags"===e&&(m(".yz-user-tag-item")[0]?m(".yz-no-user-tags").remove():m(".yz-no-user-tags")[0]||m("#yz_user_tags").append('<p class="yz-no-content yz-no-user-tags">'+yz.no_user_tags+"</p>"))},m.yz_CheckFieldOptions=function(){m("#yz_field_type").on("change",function(){var e=m(this).val(),t=m(".yz-field-options");"text"===e||"number"===e||"textarea"===e?t.fadeOut():t.fadeIn()})},m("input").keypress(function(e){if(13===(e.keyCode||e.which))return e.preventDefault(),!1}),m("#yz_widgets, #yz_networks, #yz_custom_tabs, #yz_user_tags, #yz_member_types, #yz_reactions").sortable({placeholder:"dashed-placeholder"}),m.MakeItemsSortable=function(){m(".yz-fields-content").sortable({placeholder:"ui-state-highlight",connectWith:".yz-fields-content",receive:function(e,t){var a=m(this).parent().data("widgetName"),n=t.item.context.attributes[1].nodeValue,s=m(this).parent();s.find("input[value='"+n+"']").remove(),s.find(".yz-field-item").append('<input type="hidden" name="yz_widgets['+a+'][fields][]" value="'+n+'">')}})},m.MakeItemsSortable(),m(document).on("click",".yz-md-trigger",function(e){e.preventDefault();var t="#"+m(this).data("modal");m(".yz-md-overlay").fadeIn(500,function(){m(t).addClass("yz-md-show")})}),m(document).on("click",".yz-md-close, .yz-md-close-icon",function(e){e.preventDefault();var t=m(this).closest(".yz-md-modal");m.yz_HideModal(t)}),m(document).keyup(function(e){return m(".yz-md-show")[0]&&27===e.keyCode&&m(".yz-md-close").trigger("click"),!1}),m(document).mouseup(function(e){return m(".yz-md-overlay").is(e.target)&&m(".yz-md-show")[0]&&m(".yz-md-close").trigger("click"),!1}),m.yz_HideModal=function(e){var t=e.attr("id");m(".yz-md-modal").removeClass("yz-md-show"),m(".yz-md-overlay").fadeOut(600,function(){"yz-networks-form"===t?m.yz_ResetForm(e,"networks"):"yz-ads-form"===t?m.yz_ResetForm(e,"ads"):"yz-reactions-form"===t?m.yz_ResetForm(e,"reactions"):"yz-custom-widgets-form"===t?m.yz_ResetForm(e,"custom-widgets"):"yz-custom-tabs-form"===t?m.yz_ResetForm(e,"custom-tabs"):"yz-member-types-form"===t?m.yz_ResetForm(e,"member-types"):"yz-user-tags-form"===t&&m.yz_ResetForm(e,"user-tags")})},m(".yz-edit-item").live("click",function(){(m(this).hasClass("yz-edit-field")?m("button[data-modal=yz-fields-form]"):m(this).hasClass("yz-edit-widget")?m("button[data-modal=yz-widgets-form]"):m(this).closest("ul").prev(".yz-custom-section").find(".yz-md-trigger")).trigger("click")}),m(document).on("click",".uk-panel-scheme .imgSelect label",function(e){var t=m(this).prev().val();m("#ukai-panel").removeClass().addClass("ukai-panel").addClass(t)})})}(jQuery);