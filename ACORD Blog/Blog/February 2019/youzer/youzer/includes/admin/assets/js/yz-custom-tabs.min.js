!function(t){"use strict";t(document).ready(function(){t(document).on("click","#yz-add-custom-tab",function(e){e.preventDefault();var a=t(".yz-custom-tab-name span"),n=t("#yz-custom-tabs-form"),i="yz_custom_tabs[yz_custom_tab_"+yz_nextTab+"]",o=t.yz_getAddData(n,"yz_tab"),l={value:o.title,form:n,selector:a,type:"text",tab_link:o.link,tab_type:o.type,tab_title:o.title,tab_content:o.content};if(!t.validate_tabs_data(l))return!1;t("#yz_custom_tabs").prepend('<li class="yz-custom-tab-item" data-tab-name="yz_custom_tab_'+yz_nextTab+'"><h2 class="yz-custom-tab-name"><i class="fa yz-custom-tab-icon fa-'+o.icon+'" aria-hidden="true"></i><span>'+o.title+'</span></h2><input type="hidden" name="'+i+'[link]" value="'+o.link+'" ><input type="hidden" name="'+i+'[type]" value="'+o.type+'" ><input type="hidden" name="'+i+'[title]" value="'+o.title+'" ><input type="hidden" name="'+i+'[content]" value="'+encodeURIComponent(o.content)+'" ><input type="hidden" name="'+i+'[display_sidebar]" value="'+o.display_sidebar+'" ><input type="hidden" name="'+i+'[display_nonloggedin]" value="'+o.display_nonloggedin+'" ><a class="yz-edit-item yz-edit-custom-tab"></a><a class="yz-delete-item yz-delete-custom-tab"></a></li>'),t.yz_HideModal(n),yz_nextTab++}),t(document).on("click",".yz-edit-custom-tab",function(e){var a=t(this).closest(".yz-custom-tab-item"),n=t("#yz-custom-tabs-form");t.yz_EditForm({button_id:"yz-update-custom-tab",form_title:yz.update_tab,form:n,item:a})}),t(document).on("click","#yz-update-custom-tab",function(e){e.preventDefault();var a=".yz-custom-tab-name span",n=t("#yz-custom-tabs-form"),i=t.yz_getItemObject(n),o=t.yz_getNewData(n,"keyToVal"),l={old_title:i.find(a).text(),value:o.title,form:n,selector:t(a),type:"text",tab_link:o.link,tab_type:o.type,tab_title:o.title,tab_content:o.content};if(!t.validate_tabs_data(l))return!1;t.yz_updateFieldsData(n)}),t.validate_tabs_data=function(e){var a=t.extend({},e);if(null==a.tab_title||""==t.trim(a.tab_title))return t.ShowPanelMessage({msg:yz.tab_title_empty,type:"error"}),!1;if(t.yz_isAlreadyExist({old_title:a.old_title,selector:a.selector,value:a.value,type:"text"}))return t.ShowPanelMessage({msg:yz.name_exist,type:"error"}),!1;if("link"==a.tab_type){if(null==a.tab_link||""==t.trim(a.tab_link))return t.ShowPanelMessage({msg:yz.tab_url_empty,type:"error"}),!1}else if("shortcode"==a.tab_type&&(null==a.tab_content||""==t.trim(a.tab_content)))return t.ShowPanelMessage({msg:yz.tab_code_empty,type:"error"}),!1;return!0},t("input[name=yz_tab_type]").live("change",function(){var e=".yz-custom-tabs-shortcode-items",a=".yz-custom-tabs-link-item",n=t(this).closest(".yz-custom-tabs-form");"shortcode"==this.value?n.find(a).fadeToggle(400,function(){n.find(e).fadeToggle(400)}):n.find(e).fadeToggle(400,function(){n.find(a).fadeToggle(400)})})})}(jQuery);