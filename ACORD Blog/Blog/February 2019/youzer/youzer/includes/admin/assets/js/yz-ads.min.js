!function(e){"use strict";e(document).ready(function(){e(document).on("click","#yz-add-ad",function(t){t.preventDefault();var a=e("#yz-ads-form"),d=e.yz_getAddData(a,"yz_ad"),n={selector:e(".yz-ad-title"),AD_banner:d.banner,AD_title:d.title,AD_type:d.type,AD_code:d.code,AD_url:d.url};if(!e.validate_ad_data(n))return!1;var i="yz_ads[yz_ad_"+yz_nextAD+"]",l="adsense"==d.type?"yz_show_icon":"yz_hide_icon",y="banner"==d.type?"style='background-image: url( "+d.banner+" );'":"";e("#yz_ads").prepend('<li class="yz-ad-item" data-ad-name="yz_ad_'+yz_nextAD+'"><div class="yz-ad-img '+l+'" '+y+'><i class="fa fa-code" aria-hidden="true"></i></div><div class="yz-ad-data"><h2 class="yz-ad-title">'+d.title+'</h2><div class="yz-ad-actions"><a class="yz-edit-item yz-edit-ad"></a><a class="yz-delete-item yz-delete-ad"></a></div></div><input type="hidden" name="'+i+'[title]" value="'+d.title+'"><input type="hidden" name="'+i+'[is_sponsored]" value="'+d.is_sponsored+'"><input type="hidden" name="'+i+'[url]" value="'+d.url+'"><input type="hidden" name="'+i+'[type]" value="'+d.type+'"><input type="hidden" name="'+i+'[code]" value="'+encodeURIComponent(d.code)+'"><input type="hidden" name="'+i+'[banner]" value="'+d.banner+'"></li>'),e.yz_HideModal(a),yz_nextAD++}),e(".yz-edit-ad").live("click",function(){var t=e(this).closest(".yz-ad-item");e.yz_EditForm({item:t,form_title:yz.update_ad,button_id:"yz-update-ad",form:e("#yz-ads-form")}),e.enable_live_preview()}),e("#yz-update-ad").live("click",function(t){t.preventDefault();var a=e("#yz-ads-form"),d=e.yz_getItemObject(a),n=e.yz_getNewData(a,"keyToVal"),i={old_title:d.find(".yz-ad-title").text(),selector:e(".yz-ad-title"),AD_banner:n.banner,AD_title:n.title,AD_code:n.code,AD_type:n.type,AD_url:n.url};if(!e.validate_ad_data(i))return!1;e.yz_updateFieldsData(a)}),e("input[name=yz_ad_type]").live("change",function(){var t=".yz-adcode-item",a=".yz-adbanner-items",d=e(this).closest(".yz-ads-form");"adsense"==this.value?d.find(a).fadeToggle(400,function(){d.find(t).fadeToggle(400)}):d.find(t).fadeToggle(400,function(){d.find(a).fadeToggle(400)})}),e.validate_ad_data=function(t){var a=e.extend({},t),d=e.yz_isAlreadyExist({selector:a.selector,value:a.AD_title,old_title:a.old_title,type:"text"});if(!a.AD_title||d)return e.ShowPanelMessage({msg:yz.empty_ad,type:"error"}),!1;if("banner"==a.AD_type){if(!function(t){return t?!!e.yz_isImgExist(t,"banner"):(e.ShowPanelMessage({msg:yz.empty_banner,type:"error"}),!1)}(a.AD_banner))return!1}else if("adsense"==a.AD_type&&(null==a.AD_code||""==e.trim(a.AD_code)))return e.ShowPanelMessage({msg:yz.code_empty,type:"error"}),!1;return!0}})}(jQuery);